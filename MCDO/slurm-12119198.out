
The following have been reloaded with a version change:
  1) FFTW/3.3.8-gompic-2019b => FFTW/3.3.8-gompi-2019b
  2) OpenMPI/3.1.4-gcccuda-2019b => OpenMPI/3.1.4-GCC-8.3.0
  3) ScaLAPACK/2.0.2-gompic-2019b => ScaLAPACK/2.0.2-gompi-2019b
  4) SciPy-bundle/2019.10-fosscuda-2019b-Python-3.7.4 => SciPy-bundle/2019.10-foss-2019b-Python-3.7.4

2020-06-14 00:44:58.931577: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-06-14 00:45:17.421678: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-06-14 00:45:17.430466: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.431019: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-06-14 00:45:17.431083: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-06-14 00:45:17.437573: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-06-14 00:45:17.442052: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-06-14 00:45:17.444708: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-06-14 00:45:17.449194: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-06-14 00:45:17.451819: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-06-14 00:45:17.458079: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-06-14 00:45:17.458289: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.458895: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.459288: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-06-14 00:45:17.463370: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.464089: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-06-14 00:45:17.464142: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-06-14 00:45:17.464191: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-06-14 00:45:17.464219: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-06-14 00:45:17.464242: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-06-14 00:45:17.464268: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-06-14 00:45:17.464290: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-06-14 00:45:17.464311: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-06-14 00:45:17.464435: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.464904: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:17.465284: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-06-14 00:45:17.465342: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-06-14 00:45:18.159971: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-06-14 00:45:18.160111: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 
2020-06-14 00:45:18.160128: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N 
2020-06-14 00:45:18.160503: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:18.161258: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:18.161794: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-06-14 00:45:18.162217: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 28652 MB memory) -> physical GPU (device: 0, name: GRID V100D-32Q, pci bus id: 0000:02:00.0, compute capability: 7.0)
2020-06-14 00:45:18.162613: I tensorflow/core/common_runtime/process_util.cc:147] Creating new thread pool with default inter op setting: 12. Tune using inter_op_parallelism_threads for best performance.
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
2020-06-14 00:45:22.815239: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-06-14 00:45:23.099565: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-06-14 00:45:25.742796: I tensorflow/core/profiler/lib/profiler_session.cc:225] Profiler session started.
2020-06-14 00:45:25.742965: I tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1259] Profiler found 1 GPUs
2020-06-14 00:45:25.746293: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcupti.so.10.1
2020-06-14 00:45:25.847027: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1307] function cupti_interface_->Subscribe( &subscriber_, (CUpti_CallbackFunc)ApiCallback, this)failed with error CUPTI_ERROR_VIRTUALIZED_DEVICE_NOT_SUPPORTED
2020-06-14 00:45:25.847691: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1346] function cupti_interface_->ActivityRegisterCallbacks( AllocCuptiActivityBuffer, FreeCuptiActivityBuffer)failed with error CUPTI_ERROR_VIRTUALIZED_DEVICE_NOT_SUPPORTED
2020-06-14 00:45:25.888832: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1329] function cupti_interface_->EnableCallback( 0 , subscriber_, CUPTI_CB_DOMAIN_DRIVER_API, cbid)failed with error CUPTI_ERROR_INVALID_PARAMETER
2020-06-14 00:45:25.888958: I tensorflow/core/profiler/internal/gpu/device_tracer.cc:88]  GpuTracer has collected 0 callback api events and 0 activity events.
dataset_name = CIFAR10, batch_size = 256, num_classes = 10, epochs = 500,
        MCDO_amount_of_predictions = 250, MCDO_batch_size = 250, test_img_idx = 1262,
        train_test_split = 0.8, to_shuffle = False, augmentation = False,
        label_normalizer = False, save_augmentation_to_hdf5 = False, learn rate = 1e-05,
        add_dropout_inside = True, train_all_layers = True, weights_to_use = imagenet,
        mcdo = True, es_patience = 5, train_val_split = 0.875, Dropoutrates: [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.5, 0.5], MIN_DELTA = 0.005, Early_monitor = val_accuracy
x_train shape: (50000, 32, 32, 3)
50000 train samples
10000 test samples
Total labels in train set:  [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000]
Labels in validation set:  [139, 115, 122, 105, 118, 122, 127, 129, 131, 142]
Labels in test set:  [861, 885, 878, 895, 882, 878, 873, 871, 869, 858]
Model: "model_5"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_1 (InputLayer)         [(None, 32, 32, 3)]       0         
_________________________________________________________________
block1_conv1 (Conv2D)        (None, 32, 32, 64)        1792      
_________________________________________________________________
block1_conv2 (Conv2D)        (None, 32, 32, 64)        36928     
_________________________________________________________________
block1_pool (MaxPooling2D)   (None, 16, 16, 64)        0         
_________________________________________________________________
dropout (Dropout)            (None, 16, 16, 64)        0         
_________________________________________________________________
block2_conv1 (Conv2D)        (None, 16, 16, 128)       73856     
_________________________________________________________________
block2_conv2 (Conv2D)        (None, 16, 16, 128)       147584    
_________________________________________________________________
block2_pool (MaxPooling2D)   (None, 8, 8, 128)         0         
_________________________________________________________________
dropout_1 (Dropout)          (None, 8, 8, 128)         0         
_________________________________________________________________
block3_conv1 (Conv2D)        (None, 8, 8, 256)         295168    
_________________________________________________________________
block3_conv2 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_conv3 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_pool (MaxPooling2D)   (None, 4, 4, 256)         0         
_________________________________________________________________
dropout_2 (Dropout)          (None, 4, 4, 256)         0         
_________________________________________________________________
block4_conv1 (Conv2D)        (None, 4, 4, 512)         1180160   
_________________________________________________________________
block4_conv2 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_conv3 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_pool (MaxPooling2D)   (None, 2, 2, 512)         0         
_________________________________________________________________
dropout_3 (Dropout)          (None, 2, 2, 512)         0         
_________________________________________________________________
block5_conv1 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv2 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv3 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_pool (MaxPooling2D)   (None, 1, 1, 512)         0         
_________________________________________________________________
dropout_4 (Dropout)          (None, 1, 1, 512)         0         
_________________________________________________________________
flatten (Flatten)            (None, 512)               0         
_________________________________________________________________
fc1 (Dense)                  (None, 4096)              2101248   
_________________________________________________________________
dropout_5 (Dropout)          (None, 4096)              0         
_________________________________________________________________
fc2 (Dense)                  (None, 4096)              16781312  
_________________________________________________________________
dropout_6 (Dropout)          (None, 4096)              0         
_________________________________________________________________
predictions (Dense)          (None, 10)                40970     
=================================================================
Total params: 33,638,218
Trainable params: 33,638,218
Non-trainable params: 0
_________________________________________________________________
Start fitting monte carlo dropout model
Train for 196 steps, validate for 5 steps
Epoch 1/500
196/196 - 13s - loss: 1.7274 - accuracy: 0.3653 - val_loss: 1.1525 - val_accuracy: 0.6000
Epoch 2/500
196/196 - 7s - loss: 1.0950 - accuracy: 0.6172 - val_loss: 0.9256 - val_accuracy: 0.6760
Epoch 3/500
196/196 - 7s - loss: 0.9155 - accuracy: 0.6839 - val_loss: 0.7972 - val_accuracy: 0.7216
Epoch 4/500
196/196 - 7s - loss: 0.8224 - accuracy: 0.7192 - val_loss: 0.7322 - val_accuracy: 0.7536
Epoch 5/500
196/196 - 7s - loss: 0.7535 - accuracy: 0.7421 - val_loss: 0.6780 - val_accuracy: 0.7648
Epoch 6/500
196/196 - 7s - loss: 0.7008 - accuracy: 0.7608 - val_loss: 0.6445 - val_accuracy: 0.7800
Epoch 7/500
196/196 - 7s - loss: 0.6570 - accuracy: 0.7759 - val_loss: 0.5988 - val_accuracy: 0.7896
Epoch 8/500
196/196 - 7s - loss: 0.6199 - accuracy: 0.7880 - val_loss: 0.5666 - val_accuracy: 0.8072
Epoch 9/500
196/196 - 7s - loss: 0.5871 - accuracy: 0.7993 - val_loss: 0.5647 - val_accuracy: 0.8224
Epoch 10/500
196/196 - 7s - loss: 0.5589 - accuracy: 0.8081 - val_loss: 0.5391 - val_accuracy: 0.8128
Epoch 11/500
196/196 - 7s - loss: 0.5292 - accuracy: 0.8198 - val_loss: 0.5252 - val_accuracy: 0.8216
Epoch 12/500
196/196 - 7s - loss: 0.5032 - accuracy: 0.8272 - val_loss: 0.5066 - val_accuracy: 0.8264
Epoch 13/500
196/196 - 7s - loss: 0.4790 - accuracy: 0.8357 - val_loss: 0.5042 - val_accuracy: 0.8288
Epoch 14/500
196/196 - 7s - loss: 0.4561 - accuracy: 0.8422 - val_loss: 0.4874 - val_accuracy: 0.8368
Epoch 15/500
196/196 - 7s - loss: 0.4424 - accuracy: 0.8480 - val_loss: 0.4669 - val_accuracy: 0.8360
Epoch 16/500
196/196 - 7s - loss: 0.4204 - accuracy: 0.8558 - val_loss: 0.4767 - val_accuracy: 0.8288
Epoch 17/500
196/196 - 7s - loss: 0.3971 - accuracy: 0.8628 - val_loss: 0.4648 - val_accuracy: 0.8480
Epoch 18/500
196/196 - 7s - loss: 0.3797 - accuracy: 0.8672 - val_loss: 0.4360 - val_accuracy: 0.8488
Epoch 19/500
196/196 - 7s - loss: 0.3631 - accuracy: 0.8737 - val_loss: 0.4713 - val_accuracy: 0.8408
Epoch 20/500
196/196 - 7s - loss: 0.3448 - accuracy: 0.8808 - val_loss: 0.4632 - val_accuracy: 0.8568
Epoch 21/500
196/196 - 7s - loss: 0.3295 - accuracy: 0.8846 - val_loss: 0.4507 - val_accuracy: 0.8504
Epoch 22/500
196/196 - 7s - loss: 0.3182 - accuracy: 0.8890 - val_loss: 0.4656 - val_accuracy: 0.8568
Epoch 23/500
196/196 - 7s - loss: 0.2970 - accuracy: 0.8962 - val_loss: 0.4659 - val_accuracy: 0.8592
Epoch 24/500
196/196 - 7s - loss: 0.2854 - accuracy: 0.9007 - val_loss: 0.4486 - val_accuracy: 0.8576
Epoch 25/500
196/196 - 7s - loss: 0.2696 - accuracy: 0.9062 - val_loss: 0.4680 - val_accuracy: 0.8576
Epoch 00025: early stopping
  0/250 [..............................] - ETA: 0s  9/250 [>.............................] - ETA: 2:15 20/250 [=>............................] - ETA: 1:57 31/250 [==>...........................] - ETA: 1:48 42/250 [====>.........................] - ETA: 1:41 53/250 [=====>........................] - ETA: 1:35 64/250 [======>.......................] - ETA: 1:29 75/250 [========>.....................] - ETA: 1:23 86/250 [=========>....................] - ETA: 1:18 97/250 [==========>...................] - ETA: 1:12108/250 [===========>..................] - ETA: 1:07119/250 [=============>................] - ETA: 1:02130/250 [==============>...............] - ETA: 56s 141/250 [===============>..............] - ETA: 51s152/250 [=================>............] - ETA: 46s163/250 [==================>...........] - ETA: 41s174/250 [===================>..........] - ETA: 35s185/250 [=====================>........] - ETA: 30s196/250 [======================>.......] - ETA: 25s207/250 [=======================>......] - ETA: 20s218/250 [=========================>....] - ETA: 15s229/250 [==========================>...] - ETA: 9s 240/250 [===========================>..] - ETA: 4sMCDO accuracy: 71.8%
MCDO-ensemble accuracy: 72.7%
tf.Tensor(
[[796  13  28   2   0   0   0   7  10   5]
 [ 23 846   3   1   0   0   0   0   3   9]
 [ 71   9 706  29   5  30  10  17   1   0]
 [ 55  31  91 485   6 133  24  53   9   8]
 [ 90  25 140  62 299 113  25 120   4   4]
 [ 17  12  39 115   2 646   3  40   1   3]
 [ 27  66  61  54   0  30 624   5   3   3]
 [ 33  10  28  15   0  30   0 752   0   3]
 [163  48  17   4   1   1   0   3 623   9]
 [ 62 192   7   2   0   1   0   9   5 580]], shape=(10, 10), dtype=int32)
posterior mean: 0
true label: 8

class: 0; proba: 87.8%; var: 32.11% 
class: 1; proba: 0.0%; var: 0.00% 
class: 2; proba: 0.0%; var: 0.00% 
class: 3; proba: 0.0%; var: 0.00% 
class: 4; proba: 0.0%; var: 0.00% 
class: 5; proba: 0.0%; var: 0.00% 
class: 6; proba: 0.0%; var: 0.00% 
class: 7; proba: 0.0%; var: 0.00% 
class: 8; proba: 12.2%; var: 32.11% 
class: 9; proba: 0.0%; var: 0.00% 


###############################################################################
Peregrine Cluster
Job 12119198 for user 's2934833'
Finished at: Sun Jun 14 00:50:34 CEST 2020

Job details:
============

Name                : CIFDO
User                : s2934833
Partition           : gpu
Nodes               : pg-gpu25
Cores               : 12
State               : COMPLETED
Submit              : 2020-06-13T17:36:21
Start               : 2020-06-14T00:44:49
End                 : 2020-06-14T00:50:33
Reserved walltime   : 03:00:00
Used walltime       : 00:05:44
Used CPU time       : 00:05:42 (efficiency:  8.29%)
% User (Computation): 75.80%
% System (I/O)      : 24.20%
Mem reserved        : 62.50G/node
Max Mem used        : 4.75G (pg-gpu25)
Max Disk Write      : 153.60K (pg-gpu25)
Max Disk Read       : 5.97M (pg-gpu25)
Average GPU usage   : 67.5% (pg-gpu25)


Acknowledgements:
=================

Please see this page for information about acknowledging Peregrine in your publications:

https://wiki.hpc.rug.nl/peregrine/additional_information/scientific_output

################################################################################
