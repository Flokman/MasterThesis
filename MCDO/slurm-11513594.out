
The following have been reloaded with a version change:
  1) FFTW/3.3.8-gompic-2019b => FFTW/3.3.8-gompi-2019b
  2) OpenMPI/3.1.4-gcccuda-2019b => OpenMPI/3.1.4-GCC-8.3.0
  3) ScaLAPACK/2.0.2-gompic-2019b => ScaLAPACK/2.0.2-gompi-2019b
  4) SciPy-bundle/2019.10-fosscuda-2019b-Python-3.7.4 => SciPy-bundle/2019.10-foss-2019b-Python-3.7.4

2020-05-16 11:48:27.945314: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-05-16 11:48:46.555419: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-05-16 11:48:46.562395: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.563000: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-05-16 11:48:46.563043: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-05-16 11:48:46.567941: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-05-16 11:48:46.578971: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-05-16 11:48:46.580903: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-05-16 11:48:46.584243: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-05-16 11:48:46.586248: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-05-16 11:48:46.591451: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-05-16 11:48:46.591607: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.592212: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.592585: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-05-16 11:48:46.595769: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.596212: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-05-16 11:48:46.596254: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-05-16 11:48:46.596288: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-05-16 11:48:46.596309: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-05-16 11:48:46.596328: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-05-16 11:48:46.596348: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-05-16 11:48:46.596368: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-05-16 11:48:46.596388: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-05-16 11:48:46.596487: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.597019: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:46.597390: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-05-16 11:48:46.597438: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-05-16 11:48:47.248104: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-05-16 11:48:47.248188: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 
2020-05-16 11:48:47.248214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N 
2020-05-16 11:48:47.248465: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:47.249099: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:47.249655: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-05-16 11:48:47.250290: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 28652 MB memory) -> physical GPU (device: 0, name: GRID V100D-32Q, pci bus id: 0000:02:00.0, compute capability: 7.0)
2020-05-16 11:48:47.250607: I tensorflow/core/common_runtime/process_util.cc:147] Creating new thread pool with default inter op setting: 12. Tune using inter_op_parallelism_threads for best performance.
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
WARNING:tensorflow:Gradients do not exist for variables ['concrete_dropout/p_logit:0', 'concrete_dropout_1/p_logit:0', 'concrete_dropout_2/p_logit:0', 'concrete_dropout_3/p_logit:0'] when minimizing the loss.
WARNING:tensorflow:Gradients do not exist for variables ['concrete_dropout/p_logit:0', 'concrete_dropout_1/p_logit:0', 'concrete_dropout_2/p_logit:0', 'concrete_dropout_3/p_logit:0'] when minimizing the loss.
2020-05-16 11:48:51.493783: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-05-16 11:48:51.742246: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-05-16 11:48:53.434190: I tensorflow/core/profiler/lib/profiler_session.cc:225] Profiler session started.
2020-05-16 11:48:53.434301: I tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1259] Profiler found 1 GPUs
2020-05-16 11:48:53.436723: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcupti.so.10.1
2020-05-16 11:48:53.537263: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1307] function cupti_interface_->Subscribe( &subscriber_, (CUpti_CallbackFunc)ApiCallback, this)failed with error CUPTI_ERROR_VIRTUALIZED_DEVICE_NOT_SUPPORTED
2020-05-16 11:48:53.537807: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1346] function cupti_interface_->ActivityRegisterCallbacks( AllocCuptiActivityBuffer, FreeCuptiActivityBuffer)failed with error CUPTI_ERROR_VIRTUALIZED_DEVICE_NOT_SUPPORTED
2020-05-16 11:48:53.554091: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1329] function cupti_interface_->EnableCallback( 0 , subscriber_, CUPTI_CB_DOMAIN_DRIVER_API, cbid)failed with error CUPTI_ERROR_INVALID_PARAMETER
2020-05-16 11:48:53.554188: I tensorflow/core/profiler/internal/gpu/device_tracer.cc:88]  GpuTracer has collected 0 callback api events and 0 activity events.
dataset_name = CIFAR10, batch_size = 32, num_classes = 10, epochs = 10,
        MCDO_amount_of_predictions = 50, MCDO_batch_size = 250, test_img_idx = 8196,
        train_test_split = 0.8, to_shuffle = False, augmentation = False,
        label_normalizer = False, save_augmentation_to_hdf5 = False, learn rate = 1e-05,
        add_dropout_inside = False, train_all_layers = False, weights_to_use = imagenet,
        mcdo = True, es_patience = 5, train_val_split = 0.9, Dropoutrates: [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.5, 0.5], MIN_DELTA = 0.005, Early_monitor = val_accuracy
x_train shape: (50000, 32, 32, 3)
50000 train samples
10000 test samples
Model: "model"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_1 (InputLayer)         [(None, 32, 32, 3)]       0         
_________________________________________________________________
block1_conv1 (Conv2D)        (None, 32, 32, 64)        1792      
_________________________________________________________________
block1_conv2 (Conv2D)        (None, 32, 32, 64)        36928     
_________________________________________________________________
block1_pool (MaxPooling2D)   (None, 16, 16, 64)        0         
_________________________________________________________________
block2_conv1 (Conv2D)        (None, 16, 16, 128)       73856     
_________________________________________________________________
block2_conv2 (Conv2D)        (None, 16, 16, 128)       147584    
_________________________________________________________________
block2_pool (MaxPooling2D)   (None, 8, 8, 128)         0         
_________________________________________________________________
block3_conv1 (Conv2D)        (None, 8, 8, 256)         295168    
_________________________________________________________________
block3_conv2 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_conv3 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_pool (MaxPooling2D)   (None, 4, 4, 256)         0         
_________________________________________________________________
block4_conv1 (Conv2D)        (None, 4, 4, 512)         1180160   
_________________________________________________________________
block4_conv2 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_conv3 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_pool (MaxPooling2D)   (None, 2, 2, 512)         0         
_________________________________________________________________
block5_conv1 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv2 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv3 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_pool (MaxPooling2D)   (None, 1, 1, 512)         0         
_________________________________________________________________
flatten (Flatten)            (None, 512)               0         
_________________________________________________________________
concrete_dropout (ConcreteDr (None, 1024)              525313    
_________________________________________________________________
concrete_dropout_1 (Concrete (None, 1024)              1049601   
_________________________________________________________________
concrete_dropout_2 (Concrete (None, 1024)              1049601   
_________________________________________________________________
concrete_dropout_3 (Concrete (None, 10)                10251     
=================================================================
Total params: 17,349,454
Trainable params: 17,349,454
Non-trainable params: 0
_________________________________________________________________
Start fitting monte carlo dropout model
Train for 1266 steps, validate for 141 steps
Epoch 1/10
1266/1266 - 22s - loss: 7.8466 - accuracy: 0.0994 - val_loss: 8.4421 - val_accuracy: 0.1022
Epoch 2/10
1266/1266 - 17s - loss: 8.0270 - accuracy: 0.1000 - val_loss: 8.0813 - val_accuracy: 0.1042
Epoch 3/10
1266/1266 - 17s - loss: 8.0909 - accuracy: 0.0991 - val_loss: 8.3929 - val_accuracy: 0.1067
Epoch 4/10
1266/1266 - 17s - loss: 8.1484 - accuracy: 0.1021 - val_loss: 8.1887 - val_accuracy: 0.1040
Epoch 5/10
1266/1266 - 17s - loss: 8.0979 - accuracy: 0.0995 - val_loss: 7.9622 - val_accuracy: 0.1029
Epoch 6/10
1266/1266 - 17s - loss: 2.1023 - accuracy: 0.1012 - val_loss: 1.1921e-07 - val_accuracy: 0.0964
Epoch 00006: early stopping
 0/50 [..............................] - ETA: 0s 9/50 [====>.........................] - ETA: 24s19/50 [==========>...................] - ETA: 17s29/50 [================>.............] - ETA: 11s39/50 [======================>.......] - ETA: 5s 49/50 [============================>.] - ETA: 0s/software/software/SciPy-bundle/2019.10-foss-2019b-Python-3.7.4/lib/python3.7/site-packages/numpy/lib/histograms.py:829: RuntimeWarning: invalid value encountered in greater_equal
  keep = (tmp_a >= first_edge)
/software/software/SciPy-bundle/2019.10-foss-2019b-Python-3.7.4/lib/python3.7/site-packages/numpy/lib/histograms.py:830: RuntimeWarning: invalid value encountered in less_equal
  keep &= (tmp_a <= last_edge)
MCDO accuracy: 10.0%
MCDO-ensemble accuracy: 10.0%
tf.Tensor(
[[1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]
 [1000    0    0    0    0    0    0    0    0    0]], shape=(10, 10), dtype=int32)
posterior mean: 0
true label: 3

class: 0; proba: nan%; var: nan% 
class: 1; proba: nan%; var: nan% 
class: 2; proba: nan%; var: nan% 
class: 3; proba: nan%; var: nan% 
class: 4; proba: nan%; var: nan% 
class: 5; proba: nan%; var: nan% 
class: 6; proba: nan%; var: nan% 
class: 7; proba: nan%; var: nan% 
class: 8; proba: nan%; var: nan% 
class: 9; proba: nan%; var: nan% 


###############################################################################
Peregrine Cluster
Job 11513594 for user 's2934833'
Finished at: Sat May 16 11:51:06 CEST 2020

Job details:
============

Name                : CIFDO
User                : s2934833
Partition           : gpu
Nodes               : pg-gpu12
Cores               : 12
State               : COMPLETED
Submit              : 2020-05-16T11:43:51
Start               : 2020-05-16T11:48:21
End                 : 2020-05-16T11:51:06
Reserved walltime   : 03:00:00
Used walltime       : 00:02:45
Used CPU time       : 00:02:44 (efficiency:  8.33%)
% User (Computation): 79.35%
% System (I/O)      : 20.65%
Mem reserved        : 62.50G/node
Max Mem used        : 3.38G (pg-gpu12)
Max Disk Write      : 153.60K (pg-gpu12)
Max Disk Read       : 5.83M (pg-gpu12)
Average GPU usage   : 63.7% (pg-gpu12)


Acknowledgements:
=================

Please see this page for information about acknowledging Peregrine in your publications:

https://wiki.hpc.rug.nl/peregrine/additional_information/scientific_output

################################################################################
