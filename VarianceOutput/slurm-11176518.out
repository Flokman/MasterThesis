
The following have been reloaded with a version change:
  1) FFTW/3.3.8-gompic-2019b => FFTW/3.3.8-gompi-2019b
  2) OpenMPI/3.1.4-gcccuda-2019b => OpenMPI/3.1.4-GCC-8.3.0
  3) ScaLAPACK/2.0.2-gompic-2019b => ScaLAPACK/2.0.2-gompi-2019b
  4) SciPy-bundle/2019.10-fosscuda-2019b-Python-3.7.4 => SciPy-bundle/2019.10-foss-2019b-Python-3.7.4

2020-04-30 15:42:29.513319: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-04-30 15:42:43.150008: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-04-30 15:42:43.157281: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.157830: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-04-30 15:42:43.157928: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-04-30 15:42:43.162454: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-04-30 15:42:43.165660: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-04-30 15:42:43.167101: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-04-30 15:42:43.170251: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-04-30 15:42:43.172271: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-04-30 15:42:43.177302: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-30 15:42:43.177537: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.178128: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.178647: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-04-30 15:42:43.181384: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.182199: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:02:00.0 name: GRID V100D-32Q computeCapability: 7.0
coreClock: 1.38GHz coreCount: 80 deviceMemorySize: 31.88GiB deviceMemoryBandwidth: 836.37GiB/s
2020-04-30 15:42:43.182313: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-04-30 15:42:43.182405: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-04-30 15:42:43.182470: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10
2020-04-30 15:42:43.182531: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10
2020-04-30 15:42:43.182592: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10
2020-04-30 15:42:43.182652: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10
2020-04-30 15:42:43.182713: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-30 15:42:43.182865: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.183458: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.183930: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0
2020-04-30 15:42:43.184026: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1
2020-04-30 15:42:43.902839: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-30 15:42:43.902968: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 
2020-04-30 15:42:43.903035: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N 
2020-04-30 15:42:43.903377: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.904061: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.904648: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-30 15:42:43.905146: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 28652 MB memory) -> physical GPU (device: 0, name: GRID V100D-32Q, pci bus id: 0000:02:00.0, compute capability: 7.0)
2020-04-30 15:42:43.905546: I tensorflow/core/common_runtime/process_util.cc:147] Creating new thread pool with default inter op setting: 12. Tune using inter_op_parallelism_threads for best performance.
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
2020-04-30 15:42:47.037109: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10
2020-04-30 15:42:47.337113: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
Model: "model"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
input_1 (InputLayer)         [(None, 32, 32, 3)]       0         
_________________________________________________________________
block1_conv1 (Conv2D)        (None, 32, 32, 64)        1792      
_________________________________________________________________
block1_conv2 (Conv2D)        (None, 32, 32, 64)        36928     
_________________________________________________________________
block1_pool (MaxPooling2D)   (None, 16, 16, 64)        0         
_________________________________________________________________
block2_conv1 (Conv2D)        (None, 16, 16, 128)       73856     
_________________________________________________________________
block2_conv2 (Conv2D)        (None, 16, 16, 128)       147584    
_________________________________________________________________
block2_pool (MaxPooling2D)   (None, 8, 8, 128)         0         
_________________________________________________________________
block3_conv1 (Conv2D)        (None, 8, 8, 256)         295168    
_________________________________________________________________
block3_conv2 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_conv3 (Conv2D)        (None, 8, 8, 256)         590080    
_________________________________________________________________
block3_pool (MaxPooling2D)   (None, 4, 4, 256)         0         
_________________________________________________________________
block4_conv1 (Conv2D)        (None, 4, 4, 512)         1180160   
_________________________________________________________________
block4_conv2 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_conv3 (Conv2D)        (None, 4, 4, 512)         2359808   
_________________________________________________________________
block4_pool (MaxPooling2D)   (None, 2, 2, 512)         0         
_________________________________________________________________
block5_conv1 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv2 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_conv3 (Conv2D)        (None, 2, 2, 512)         2359808   
_________________________________________________________________
block5_pool (MaxPooling2D)   (None, 1, 1, 512)         0         
_________________________________________________________________
flatten (Flatten)            (None, 512)               0         
_________________________________________________________________
fc1 (Dense)                  (None, 4096)              2101248   
_________________________________________________________________
fc2 (Dense)                  (None, 4096)              16781312  
_________________________________________________________________
dense (Dense)                (None, 10)                40970     
=================================================================
Total params: 33,638,218
Trainable params: 33,638,218
Non-trainable params: 0
_________________________________________________________________
Model: "model_1"
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            [(None, 32, 32, 3)]  0                                            
__________________________________________________________________________________________________
block1_conv1 (Conv2D)           (None, 32, 32, 64)   1792        input_1[0][0]                    
__________________________________________________________________________________________________
block1_conv2 (Conv2D)           (None, 32, 32, 64)   36928       block1_conv1[1][0]               
__________________________________________________________________________________________________
block1_pool (MaxPooling2D)      (None, 16, 16, 64)   0           block1_conv2[1][0]               
__________________________________________________________________________________________________
block2_conv1 (Conv2D)           (None, 16, 16, 128)  73856       block1_pool[1][0]                
__________________________________________________________________________________________________
block2_conv2 (Conv2D)           (None, 16, 16, 128)  147584      block2_conv1[1][0]               
__________________________________________________________________________________________________
block2_pool (MaxPooling2D)      (None, 8, 8, 128)    0           block2_conv2[1][0]               
__________________________________________________________________________________________________
block3_conv1 (Conv2D)           (None, 8, 8, 256)    295168      block2_pool[1][0]                
__________________________________________________________________________________________________
block3_conv2 (Conv2D)           (None, 8, 8, 256)    590080      block3_conv1[1][0]               
__________________________________________________________________________________________________
block3_conv3 (Conv2D)           (None, 8, 8, 256)    590080      block3_conv2[1][0]               
__________________________________________________________________________________________________
block3_pool (MaxPooling2D)      (None, 4, 4, 256)    0           block3_conv3[1][0]               
__________________________________________________________________________________________________
block4_conv1 (Conv2D)           (None, 4, 4, 512)    1180160     block3_pool[1][0]                
__________________________________________________________________________________________________
block4_conv2 (Conv2D)           (None, 4, 4, 512)    2359808     block4_conv1[1][0]               
__________________________________________________________________________________________________
block4_conv3 (Conv2D)           (None, 4, 4, 512)    2359808     block4_conv2[1][0]               
__________________________________________________________________________________________________
block4_pool (MaxPooling2D)      (None, 2, 2, 512)    0           block4_conv3[1][0]               
__________________________________________________________________________________________________
block5_conv1 (Conv2D)           (None, 2, 2, 512)    2359808     block4_pool[1][0]                
__________________________________________________________________________________________________
block5_conv2 (Conv2D)           (None, 2, 2, 512)    2359808     block5_conv1[1][0]               
__________________________________________________________________________________________________
block5_conv3 (Conv2D)           (None, 2, 2, 512)    2359808     block5_conv2[1][0]               
__________________________________________________________________________________________________
block5_pool (MaxPooling2D)      (None, 1, 1, 512)    0           block5_conv3[1][0]               
__________________________________________________________________________________________________
flatten (Flatten)               (None, 512)          0           block5_pool[1][0]                
__________________________________________________________________________________________________
fc1 (Dense)                     (None, 4096)         2101248     flatten[1][0]                    
__________________________________________________________________________________________________
fc2 (Dense)                     (None, 4096)         16781312    fc1[1][0]                        
__________________________________________________________________________________________________
dense_1 (Dense)                 (None, 10)           40970       fc2[1][0]                        
__________________________________________________________________________________________________
dense_2 (Dense)                 (None, 10)           40970       fc2[1][0]                        
__________________________________________________________________________________________________
concatenate (Concatenate)       (None, 20)           0           dense_1[0][0]                    
                                                                 dense_2[0][0]                    
==================================================================================================
Total params: 33,679,188
Trainable params: 33,679,188
Non-trainable params: 0
__________________________________________________________________________________________________
Start fitting
Train for 1407 steps, validate for 157 steps
Epoch 1/50
1407/1407 - 26s - loss: 0.9249 - acc: 0.0522 - val_loss: 0.6612 - val_acc: 0.1260
Epoch 2/50
1407/1407 - 22s - loss: 0.6007 - acc: 0.1145 - val_loss: 0.5710 - val_acc: 0.1870
Epoch 3/50
1407/1407 - 22s - loss: 0.4829 - acc: 0.1759 - val_loss: 0.5517 - val_acc: 0.2104
Epoch 4/50
1407/1407 - 22s - loss: 0.3886 - acc: 0.2047 - val_loss: 0.5213 - val_acc: 0.2714
Epoch 5/50
1407/1407 - 22s - loss: 0.3148 - acc: 0.2074 - val_loss: 0.5584 - val_acc: 0.1904
Epoch 6/50
1407/1407 - 22s - loss: 0.2510 - acc: 0.2088 - val_loss: 0.5453 - val_acc: 0.2118
Epoch 7/50
1407/1407 - 22s - loss: 0.1895 - acc: 0.1669 - val_loss: 0.5441 - val_acc: 0.1410
Epoch 8/50
1407/1407 - 22s - loss: 0.1455 - acc: 0.1329 - val_loss: 0.5540 - val_acc: 0.1388
Epoch 9/50
1407/1407 - 22s - loss: 0.1031 - acc: 0.1469 - val_loss: 0.6198 - val_acc: 0.1114
Epoch 10/50
1407/1407 - 22s - loss: 0.0824 - acc: 0.1505 - val_loss: 0.6700 - val_acc: 0.1658
Epoch 11/50
1407/1407 - 22s - loss: 0.0592 - acc: 0.1078 - val_loss: 0.7400 - val_acc: 0.1074
Epoch 12/50
1407/1407 - 22s - loss: 0.0517 - acc: 0.1060 - val_loss: 0.7587 - val_acc: 0.1412
Epoch 13/50
1407/1407 - 22s - loss: 0.0437 - acc: 0.1226 - val_loss: 0.7976 - val_acc: 0.0850
Epoch 14/50
1407/1407 - 22s - loss: 0.0397 - acc: 0.1124 - val_loss: 0.8291 - val_acc: 0.0930
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
WARNING:tensorflow:sample_weight modes were coerced from
  ...
    to  
  ['...']
Epoch 00014: early stopping
Train for 1407 steps, validate for 157 steps
Epoch 1/50
1407/1407 - 25s - loss: 0.0378 - acc: 0.9893 - val_loss: 0.7952 - val_acc: 0.8416
Epoch 2/50
1407/1407 - 23s - loss: 0.0336 - acc: 0.9896 - val_loss: 0.9112 - val_acc: 0.8336
Epoch 3/50
1407/1407 - 23s - loss: 0.0354 - acc: 0.9889 - val_loss: 0.8231 - val_acc: 0.8474
Epoch 4/50
1407/1407 - 22s - loss: 0.0309 - acc: 0.9908 - val_loss: 0.8647 - val_acc: 0.8362
Epoch 5/50
1407/1407 - 22s - loss: 0.0263 - acc: 0.9920 - val_loss: 0.8416 - val_acc: 0.8496
Epoch 6/50
1407/1407 - 23s - loss: 0.0282 - acc: 0.9913 - val_loss: 0.9103 - val_acc: 0.8364
Epoch 7/50
1407/1407 - 23s - loss: 0.0278 - acc: 0.9910 - val_loss: 0.8693 - val_acc: 0.8422
Epoch 8/50
1407/1407 - 22s - loss: 0.0198 - acc: 0.9938 - val_loss: 0.9477 - val_acc: 0.8382
Epoch 9/50
1407/1407 - 23s - loss: 0.0268 - acc: 0.9914 - val_loss: 0.9343 - val_acc: 0.8420
Epoch 10/50
1407/1407 - 22s - loss: 0.0226 - acc: 0.9929 - val_loss: 0.8809 - val_acc: 0.8430
Epoch 11/50
1407/1407 - 22s - loss: 0.0214 - acc: 0.9934 - val_loss: 0.8802 - val_acc: 0.8476
Epoch 12/50
1407/1407 - 22s - loss: 0.0202 - acc: 0.9939 - val_loss: 0.9024 - val_acc: 0.8382
Epoch 13/50
1407/1407 - 22s - loss: 0.0182 - acc: 0.9942 - val_loss: 0.8957 - val_acc: 0.8488
Epoch 14/50
1407/1407 - 22s - loss: 0.0177 - acc: 0.9941 - val_loss: 0.9100 - val_acc: 0.8506
Epoch 15/50
1407/1407 - 22s - loss: 0.0204 - acc: 0.9936 - val_loss: 0.9059 - val_acc: 0.8460
Epoch 16/50
1407/1407 - 22s - loss: 0.0148 - acc: 0.9952 - val_loss: 0.9459 - val_acc: 0.8454
Epoch 00016: early stopping
Accuracy on original test dataset: 69.5%
tf.Tensor(
[[923  19  34   5   0   0   2   1   9   7]
 [ 21 957   5   1   0   1   0   0   4  11]
 [ 74  11 824  39   0  24  16  11   1   0]
 [ 44  54 113 547   1 163  32  24  11  11]
 [113  52 293 183  80 102  70  99   5   3]
 [ 22  23  88 115   0 719   7  23   0   3]
 [ 28  62  89  42   0  30 734   1  10   4]
 [ 74  25  37  40   0  49   2 767   2   4]
 [231  64  10   2   0   2   3   1 670  17]
 [ 54 205   4   3   0   1   1   1   7 724]], shape=(10, 10), dtype=int32)
Correct: 6945, wrong: 3055, accuracy: 69.45%

Mean probability on true label of original test dataset when correctly predicted = 99.89%
Mean uncertainty on true label of original test dataset when correctly predicted = 181.57%
Mean probability on true label of original test dataset when wrongly predicted = 0.16%
Mean uncertainty on true label of original test dataset when wrongly predicted = 115.51%

Mean probability on highest predicted on original test dataset when wrong = 99.54%
Mean uncertainty on highest predicted on original test dataset when wrong = 118.00%

Mean probability on all not true label on original test dataset = 3.40%
Mean uncertainty on all not true label on original test dataset = 171.29%


###############################################################################
Peregrine Cluster
Job 11176518 for user 's2934833'
Finished at: Thu Apr 30 15:54:06 CEST 2020

Job details:
============

Name                : test
User                : s2934833
Partition           : gpu
Nodes               : pg-gpu17
Cores               : 12
State               : COMPLETED
Submit              : 2020-04-30T15:42:23
Start               : 2020-04-30T15:42:24
End                 : 2020-04-30T15:54:06
Reserved walltime   : 02:00:00
Used walltime       : 00:11:42
Used CPU time       : 00:14:44 (efficiency: 10.50%)
% User (Computation): 90.56%
% System (I/O)      :  9.44%
Mem reserved        : 32000M/node
Max Mem used        : 3.06G (pg-gpu17)
Max Disk Write      : 153.60K (pg-gpu17)
Max Disk Read       : 5.83M (pg-gpu17)
Average GPU usage   : 63.4% (pg-gpu17)


Acknowledgements:
=================

Please see this page for information about acknowledging Peregrine in your publications:

https://wiki.hpc.rug.nl/peregrine/additional_information/scientific_output

################################################################################
